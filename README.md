# 2023_BigData_Project

## âœ… Theme: ê²½ê¸°ë„ ìˆ˜ì›ì‹œì˜ ìµœê·¼ ë¬¼ê°€ ë™í–¥ì„ ë¶„ì„í•´ë³´ì~
### 1ï¸âƒ£ Language & Libraries
1. Python   
2. pandas : ë°ì´í„° ë¶„ì„
3. matplotlib & seaborn : ì‹œê°í™”

### 2ï¸âƒ£ ë°ì´í„° ì¶œì²˜
ê³µê³µ ë°ì´í„° í¬í„¸ : https://www.data.go.kr/data/15010720/fileData.do

### 3ï¸âƒ£ ë°ì´í„° ë¶„ì„

* í•œêµ­ì¸ì´ë¼ë©´ ëˆ„êµ¬ë‚˜ ì‚¬ë‘í•˜ëŠ” K-Food í•œì‹ì˜ ì „ì›” ëŒ€ë¹„ ë¬¼ê°€ ìƒìŠ¹ë¥ ì„ í•œë²ˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.  
ê°€ì¥ ë†’ì€ ìƒìŠ¹ë¥ ì„ ë³´ì—¬ì¤€ í’ˆëª©ì€ **ë“±ì‹¬êµ¬ì´**ë¡œ **2023ë…„ 4ì›”**ì— ë¬´ë ¤ **18.6%** ë‚˜ ìƒìŠ¹í–ˆë„¤ìš”!  

![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/fe71d851-4631-467f-9928-841db646a895)

<hr>

* ê·¸ë ‡ë‹¤ë©´ ì›ìì¬ì¸ ì†Œê³ ê¸° ë¬¼ê°€ì—ì„œë„ í° ìƒìŠ¹ì´ ì¼ì–´ë‚¬ì„ê¹Œìš”? ğŸ¤”

  2023ë…„ 4ì›”ì—ëŠ” ì†Œê³ ê¸° ë¬¼ê°€ì˜ í° ë³€ë™ì€ ì—†ì—ˆìœ¼ë©° **2023ë…„ 8ì›”** ì— í° í­ìœ¼ë¡œ í•˜ë½ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/dd3149a6-61d3-4b57-990f-ce6ef4a33763)

<hr>

* **ì†Œê³ ê¸°**ë¥¼ ì‚¬ìš©í•˜ëŠ” ìŒì‹ì ì˜ ë¬¼ê°€ë¥¼ ì‚´í´ë³¼ê¹Œìš” ?  
  ì¤€ë¹„ëœ ë°ì´í„°ì—ì„œ ì†Œê³ ê¸°ë¥¼ ì‚¬ìš©í•˜ëŠ” ìŒì‹ì€ ê°ˆë¹„íƒ•, ë¶ˆê³ ê¸°, ì„¤ë íƒ•ì´ ìˆìŠµë‹ˆë‹¤.  
  ì„¸ê°€ì§€ í’ˆëª© ëª¨ë‘ ê³µí†µëœ íŠ¹ì§•ì´ ìˆëŠ”ë° **ì†Œê³ ê¸°ì˜ ê°€ê²©ì˜ í° í•˜ë½ì´ ìˆë˜ 8ì›”ì— ë™ì‹œì— ë¬¼ê°€ í•˜ë½**ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

  ğŸ˜Š ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì›ìì¬ ê°’ì˜ í•˜ë½ì— ë”°ë¥¸ ê´€ë ¨ ì—…ì¢… ìŒì‹ì˜ ë¬¼ê°€ í•˜ë½ì´ ìˆì—ˆë‹¤ê³  ì˜ˆì¸¡ í•  ìˆ˜ ìˆê² ì£  !
![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/ea826164-f8d8-407a-863b-576628307f93)

<hr>

ğŸ¤” ë‹¤ìŒìœ¼ë¡œëŠ” **ìˆ˜ì‚°ë¬¼**ì˜ ë¬¼ê°€ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ìˆ˜ì‚°ë¬¼ì€ ê³ ë“±ì–´, ê°ˆì¹˜, ì˜¤ì§•ì–´, ë™íƒœê°€ ìˆìŠµë‹ˆë‹¤.  
   ì´ ì¤‘ ë¬¼ê°€ ìƒìŠ¹ë¥ ì´ ê°€ì¥ í° í•­ëª©ì€ **2023-5ì›”** ì˜ ê°ˆì¹˜ê°€ **0.44%** ë¡œ ê°€ì¥ í° ì „ë…„ëŒ€ë¹„ ìƒìŠ¹í­ì„ ë³´ì—¬ì¤¬ìŠµë‹ˆë‹¤.  
   ë¬¼ê°€ ìƒìŠ¹ë¥ ì´ ê°€ì¥ ì ì€ í•­ëª©ì€ **2023ë…„-5ì›”** ë™íƒœë¡œ **0.17%** í•˜ë½ í•˜ì˜€ìŠµë‹ˆë‹¤. 

![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/7a612f42-d9a8-4ce9-9c80-580c67a8956d)

<hr>

ğŸ¥ ğŸ¥  ë‹¤ìŒìœ¼ë¡œ êµ­ë¯¼ ìŒì‹ **ì¹˜í‚¨**ì„ ì‚´í´ë³¼ê¹Œìš” ? ğŸ¥ ğŸ¥ 
![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/9f3846ae-fa29-4fb8-b039-c0e9b6dbfe59)

<hr>

> 2023ë…„ 01ì›”ì— **10%** ë¡œ ë§¤ìš° ë†’ì€ ìƒìŠ¹ë¥ ì„ ê¸°ë¡í–ˆëŠ”ë°ìš” ê¸°ì‚¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´  
ëŸ¬ì‹œì•„ì™€ ìš°í¬ë¼ì´ë‚˜ê°„ì˜ ì „ìŸìœ¼ë¡œ ì¸í•œ ì „ ì„¸ê³„ì ì¸ ë¬¼ê°€ ìƒìŠ¹ì´ ì›ì¸ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.<br>  
![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/d7142a4a-fbc8-4cba-8a2b-bc4abbe9746d)

<hr>

> **1ì›” ìµœê³  ìƒìŠ¹ë¥ **ì„ ë³´ì—¬ì£¼ê³  ì´í›„ë¡œëŠ” **ì§€ì†ì ì¸ í•˜ë½ì„¸**ë¥¼ ë³´ì—¬ì£¼ì—ˆëŠ”ë°ìš” ê¸°ì‚¬ì— ë”°ë¥´ë©´  
ì´ëŠ” 4ì›”ë¶€í„° ëŒ€í•œë¯¼êµ­ ì •ë¶€ì—ì„œ ì¹˜í‚¨ ë¬¼ê°€ ì•ˆì •ì„ ìœ„í•œ ì •ì±…ì„ í¼ì³¤ê¸° ë•Œë¬¸ìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.  
![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/af6c1d0a-c243-4b44-a42b-ea0ef23a8800)

<hr>

### 4ï¸âƒ£ ë„¤ì´ë²„ API í¬ë¡¤ë§
 **í¬ë¡¤ë§**ì„ í†µí•´ **ìˆ˜ì›ì‹œ ë¬¼ê°€**ì— ëŒ€í•œ ê¸°ì‚¬ë¥¼ ì¢€ ë” ë¶„ì„í•´ ë³´ê² ìŠµë‹ˆë‹¤.  
  > ### 1. í”„ë¡œê·¸ë¨ êµ¬ì„± ì„¤ê³„í•˜ê¸°
    def main()

    1. ê²€ìƒ‰ì–´ ì§€ì •
    
    2. ë„¤ì´ë²„ ë‰´ìŠ¤ ê²€ìƒ‰
    
    3. ì‘ë‹µ ë°ì´í„° ì •ë¦¬ í›„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
    
    4. ë¦¬ìŠ¤íŠ¸ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥

  ```
  #1. ê²€ìƒ‰ì–´ ì§€ì •
  def getRequestUrl(url):
    req = urllib.request.Request(url) # ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ urlì— ëŒ€í•œ ìš”ì²­ì„ ë³´ë‚¼ ê°ì²´ë¥¼ ìƒì„±
    req.add_header("X-Naver-Client-Id", client_id) # APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ Client IDì™€ Client Secret ì½”ë“œë¥¼ ìš”ì²­ ê°ì²´ í—¤ë“œì— ì¶”ê°€
    req.add_header("X-Naver-Client-Secret", client_secret)

    try:
        response = urllib.request.urlopen(req) # ìš”ì²­ ê°ì²´ë¥¼ ë³´ë‚´ê³  ê·¸ì— ëŒ€í•œ ì‘ë‹µì„ ë°›ì•„ response ê°ì²´ì— ì €ì¥
        if response.getcode() == 200: # ì •ìƒ ì²˜ë¦¬
            print ("[%s] Url Request Success" % datetime.datetime.now()) # ì •ìƒ ì²˜ë¦¬ ë©”ì‹œì§€ ì¶œë ¥
            return response.read().decode('utf-8') # utf-8 í˜•ì‹ìœ¼ë¡œ ë””ì½”ë”© í›„ ë°˜í™˜
    except Exception as e:
        print(e)
        print("[%s] Error for URL : %s" % (datetime.datetime.now(), url))
        return None
  ```
```
  # 2. ë„¤ì´ë²„ ë‰´ìŠ¤ ê²€ìƒ‰
    #[CODE 2]
    def getNaverSearch(node, srcText, start, display):
      base = "https://openapi.naver.com/v1/search" 
      node = "/%s.json" % node
      parameters = "?query=%s&start=%s&display=%s" % (urllib.parse.quote(srcText), start, display)
  
      url = base + node + parameters # ë„¤ì´ë²„ ê²€ìƒ‰ API ì •ë³´ì— ë”°ë¼ ìš”ì²­ URLì„ êµ¬ì„±
      responseDecode = getRequestUrl(url)   #[CODE 1]
  
      if (responseDecode == None):
          return None
      else:
          return json.loads(responseDecode) # ì„œë²„ì—ì„œ ë°›ì€ JSON í˜•íƒœì˜ ì‘ë‹µ ê°ì²´ë¥¼ íŒŒì´ì¬ ê°ì²´ë¡œ ë¡œë“œí•˜ì—¬ ë°˜í™˜
```

```
    # 3. ì‘ë‹µ ë°ì´í„° ì •ë¦¬ í›„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
    #[CODE 3]
    def getPostData(post, jsonResult, cnt):
        # ê²€ìƒ‰ ê²°ê³¼ê°€ ë“¤ì–´ ìˆëŠ” post ê°ì²´ì—ì„œ í•„ìš”í•œ ë°ì´í„° í•­ëª©ì„ ì¶”ì¶œí•˜ì—¬ ë³€ìˆ˜ì— ì €ì¥
        title = post['title']
        description = post['description']
        org_link = post['originallink']
        link = post['link']
    
        pDate = datetime.datetime.strptime(post['pubDate'],  '%a, %d %b %Y %H:%M:%S +0900')
        pDate = pDate.strftime('%Y-%m-%d %H:%M:%S') # ë‚ ì§œë¥¼ 'ì—°-ì›”-ì¼ ì‹œ:ë¶„:ì´ˆ' í˜•ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ë‹¤.

        # ë°ì´í„°ë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ êµ¬ì„±í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ ê°ì²´ì¸ jsonResultì— ì¶”ê°€
        jsonResult.append({'cnt':cnt, 'title':title, 'description': description,
        'org_link':org_link,   'link': org_link,   'pDate':pDate})
            return
```

```
  # 4. ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ ì €ì¥
   #[CODE 0]
    def main():
        node = 'news'   # í¬ë¡¤ë§ í•  ëŒ€ìƒ
        srcText = input('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”: ')
        cnt = 0
        jsonResult = []
    
        jsonResponse = getNaverSearch(node, srcText, 1, 100)  #[CODE 2]
        total = jsonResponse['total']
    
        while ((jsonResponse != None) and (jsonResponse['display'] != 0)):
            for post in jsonResponse['items']:
                cnt += 1
                getPostData(post, jsonResult, cnt)  #[CODE 3]
    
            start = jsonResponse['start'] + jsonResponse['display']
            jsonResponse = getNaverSearch(node, srcText, start, 100)  #[CODE 2]
    
        print('ì „ì²´ ê²€ìƒ‰ : %d ê±´' %total)
    
        with open('%s_naver_%s.json' % (srcText, node), 'w', encoding='utf8') as outfile:
            jsonFile = json.dumps(jsonResult,  indent=4, sort_keys=True,  ensure_ascii=False)
    
            outfile.write(jsonFile)
    
        print("ê°€ì ¸ì˜¨ ë°ì´í„° : %d ê±´" %(cnt))
        print ('%s_naver_%s.json SAVED' % (srcText, node))
    
    if __name__ == '__main__':
        main()
```
  ### í¬ë¡¤ë§ ë°ì´í„° í™•ì¸
  ![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/639f10fb-3a6c-44ae-bb97-1691abcc9310)


> ### 2. ì›Œë“œ í´ë¼ìš°ë”©
  êµ¬ë¦„ ëª¨ì–‘ ì›Œí¬ í´ë¼ìš°ë“œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.  
  <img src="https://github.com/chanho0908/2023_BigData_Project/assets/84930748/1c11ecf9-ddde-45c6-a8ae-a098fb6027fe" width="400"/><img src="https://github.com/chanho0908/2023_BigData_Project/assets/84930748/f39412c5-9b18-4576-ae26-2f45ee9d5867" width="400"/>

<hr>

### 5ï¸âƒ£ ë°ì´í„° ì˜ˆì¸¡
 ##### ê·¸ëŸ¼ ì´ì œ ë‹¤ì–‘í•œ íšŒê·€ ëª¨ë¸ì„ ì‚¬ìš©í•´ ì¹˜í‚¨ ê°’ì„ ì˜ˆì¸¡í•´ ë³´ê² ìŠµë‹ˆë‹¤.
 ####  âœ” LinearRegression
   ```  
  # íŠ¹ì„± ì„ íƒ
  X = df_chicken['ê¸°ì¤€ì¼'].dt.month.values.reshape(-1, 1)
  y = df_chicken['ë¬¼ê°€ë™í–¥'].values
  
  # í›ˆë ¨ ë° í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¶„ë¦¬
  X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)
  
  # íšŒê·€ ëª¨ë¸ í•™ìŠµ
  model = LinearRegression()
  model.fit(X_train, y_train)
  
  # í…ŒìŠ¤íŠ¸ ë°ì´í„°ì— ëŒ€í•œ ì˜ˆì¸¡
  y_pred = model.predict(X_test)
  
  # í‰ê°€
  mse = mean_squared_error(y_test, y_pred)
  rmse = np.sqrt(mse)
  print(f'Root Mean Squared Error (RMSE): {rmse}')
  
  ```
 #### ê²°ê³¼
    RMSE : 300.550
![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/90a08b8a-f9d4-4f9d-a167-549cd62c0d24)


####  âœ” DecisionTreeRegressor
  ```
  # íŠ¹ì„± ì„ íƒ
  X = df_chicken['ê¸°ì¤€ì¼'].dt.month.values.reshape(-1, 1)
  y = df_chicken['ë¬¼ê°€ë™í–¥'].values
  
  # í›ˆë ¨ ë° í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¶„ë¦¬
  X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)
  
  # ê²°ì • íŠ¸ë¦¬ ëª¨ë¸ í•™ìŠµ
  model = DecisionTreeRegressor(max_depth=3) 
  model.fit(X_train, y_train)
  
  # í…ŒìŠ¤íŠ¸ ë°ì´í„°ì— ëŒ€í•œ ì˜ˆì¸¡
  y_pred = model.predict(X_test)
  
  # í‰ê°€
  mse = mean_squared_error(y_test, y_pred)
  # RMSE ê³„ì‚° ë° ì¶œë ¥
  rmse = np.sqrt(mse)
  print(f'Root Mean Squared Error (RMSE): {rmse}')
  ```
  #### ê²°ê³¼
    RMSE : 394.1763
![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/5bdcb536-1660-44b1-8136-539420631edf)


####  âœ” íŠ¸ë¦¬ ê¸°ë°˜ì˜ íšŒê·€ ëª¨ë¸ [ SVR, AdaBoostRegressor, XGBRegressor, LGBMRegressor ] ë° Kê²¹ êµì°¨ ê²€ì¦
  ```
    def get_model_cv_prediction(model, X_data, y_target):
        neg_mse_scores = cross_val_score(model, X_data, y_target, 
                                         scoring="neg_mean_squared_error", cv=7)
        rmse_scores = np.sqrt(-1 * neg_mse_scores)
        avg_rmse = np.mean(rmse_scores)
        print('##### ', model.__class__.__name__, ' #####')
        print(' 7 êµì°¨ ê²€ì¦ì˜ í‰ê·  RMSE : {0:.3f} '.format(avg_rmse))
    
    y_target = reg_df_chicken['ë¬¼ê°€ë™í–¥']
    X_data = reg_df_chicken[['Month']]
    
    ada_reg = AdaBoostRegressor()
    xgb_reg = XGBRegressor()
    
    # íŠ¸ë¦¬ ê¸°ë°˜ì˜ íšŒê·€ ëª¨ë¸ì„ ë°˜ë³µí•˜ë©´ì„œ í‰ê°€ ìˆ˜í–‰
    models = [ada_reg, xgb_reg]
    for model in models:
        get_model_cv_prediction(model, X_data, y_target)
  ```
    
   #### ê²°ê³¼
    #####  AdaBoostRegressor  #####
    7 êµì°¨ ê²€ì¦ì˜ í‰ê·  RMSE : 826.094 
    #####  XGBRegressor  #####
    7 êµì°¨ ê²€ì¦ì˜ í‰ê·  RMSE : 855.070 

  ![image](https://github.com/chanho0908/2023_BigData_Project/assets/84930748/4ff885b6-18db-4906-8fc0-3393fc53931b)

